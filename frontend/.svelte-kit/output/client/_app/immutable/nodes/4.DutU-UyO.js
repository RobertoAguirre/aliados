import{a as _,f as y}from"../chunks/D8t6tpFo.js";import{p as te,d as oe,f as le,e as ne,$ as se,c as o,b as r,g as n,r as t,a as L,n as ie,t as I,u as F,s as f}from"../chunks/BHAR4PZv.js";import{d as de,s as h,a as be,e as pe}from"../chunks/BsxsctS-.js";import{i as J}from"../chunks/Cl2nnox4.js";import{s as ce,r as m,e as ue,b as v,i as me}from"../chunks/BHUO7-JO.js";import{h as ve}from"../chunks/Ccg5Ibm-.js";import{L as fe,b as xe}from"../chunks/4oVehXen.js";import{Q as ge}from"../chunks/_DoowVny.js";var _e=y('<div class="text-center"><p class="font-bold text-lg mb-2">Red creada</p> <p class="text-sm mb-4"> </p> <div class="mx-auto mb-4 max-w-xs border-2 border-brand-black rounded-lg p-3 bg-white"><!></div> <p class="text-sm mb-4">Comparte tu QR o enlace para que otros IMPULSEN o se ÃšNAN a tu red:</p> <a class="inline-block py-2 px-4 bg-brand-blue text-white rounded font-medium"> </a> <button type="button" class="mt-3 inline-flex items-center gap-2 px-5 py-2 rounded-full bg-[#25D366] text-white font-semibold border-2 border-brand-black shadow-[3px_3px_0_0_#000] hover:opacity-90">COMPARTIR</button> <a href="/" class="block mt-6 underline">Inicio</a></div>'),he=y("<option> </option>"),ye=y('<p class="text-red-800 text-sm"> </p>'),we=y('<form class="space-y-4"><label class="block"><span class="block text-sm font-medium mb-1">NOMBRE</span> <input type="text" required="" class="w-full border-2 border-brand-black rounded px-3 py-2 bg-white"/></label> <label class="block"><span class="block text-sm font-medium mb-1">APELLIDO PATERNO</span> <input type="text" required="" class="w-full border-2 border-brand-black rounded px-3 py-2 bg-white"/></label> <label class="block"><span class="block text-sm font-medium mb-1">APELLIDO MATERNO</span> <input type="text" required="" class="w-full border-2 border-brand-black rounded px-3 py-2 bg-white"/></label> <label class="block"><span class="block text-sm font-medium mb-1">TELÃ‰FONO</span> <input type="tel" required="" class="w-full border-2 border-brand-black rounded px-3 py-2 bg-white"/></label> <div><span class="block text-sm font-medium mb-1">FECHA DE NACIMIENTO</span> <div class="flex gap-2"><select class="flex-1 border-2 border-brand-black rounded px-2 py-2 bg-white"></select> <input type="number" min="1" max="31" class="w-16 border-2 border-brand-black rounded px-2 py-2 bg-white text-center"/> <input type="number" min="1920" max="2026" class="w-20 border-2 border-brand-black rounded px-2 py-2 bg-white text-center"/></div></div> <label class="block"><span class="block text-sm font-medium mb-1">DIRECCIÃ“N</span> <input type="text" required="" class="w-full border-2 border-brand-black rounded px-3 py-2 bg-white" placeholder="ESCRIBE AQUÃ TU DIRECCIÃ“N"/></label> <div class="rounded overflow-hidden border border-brand-black/30 h-32"><!></div> <!> <button type="submit" class="w-full py-3 font-bold bg-brand-black text-brand-yellow rounded border-2 border-brand-black hover:opacity-90 disabled:opacity-50"> </button></form>'),ke=y('<div class="max-w-lg mx-auto px-4 py-6"><div class="bg-white rounded-lg border-2 border-brand-orange p-6 shadow-lg"><h2 class="text-lg font-bold flex items-center gap-2 mb-6"><span class="w-8 h-8 rounded-full bg-brand-blue/20 flex items-center justify-center text-brand-blue">ðŸ‘¤</span> Crear mi red (primer impulsor)</h2> <p class="text-sm text-gray-700 mb-4">Registro para iniciar tu propia red. Luego podrÃ¡s compartir tu enlace o QR.</p> <!></div></div>');function Oe(z,B){te(B,!0);let e=oe({nombre:"",apellidoPaterno:"",apellidoMaterno:"",telefono:"",mes:"01",dia:"1",anio:"1990",direccion:"",lat:null,lng:null}),w=L(!1),x=L(""),i=L(null);const H=F(()=>`${e.anio}-${e.mes.padStart(2,"0")}-${e.dia.padStart(2,"0")}`);async function W(){f(x,""),f(w,!0);try{const l=await fetch("/api/usuarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e.nombre,apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,telefono:e.telefono,fechaNacimiento:n(H),direccion:e.direccion,lat:e.lat,lng:e.lng,rol:"impulsa"})}),s=await l.json();if(!l.ok){f(x,s.error??"Error al crear usuario",!0);return}f(i,s,!0)}catch(l){f(x,l.message??"Error de conexiÃ³n",!0)}finally{f(w,!1)}}function G(){if(!n(i))return;const l=`${window.location.origin}/r/${n(i).codigo}`,s=`ÃšNETE A MI RED
Red de ${n(i).nombreCompleto}
${l}`,d=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(d,"_blank")}var N=ke();ve("1x8jo72",l=>{ne(()=>{se.title="Crear mi red â€” Aliados QR"})});var T=o(N),K=r(o(T),4);{var V=l=>{var s=_e(),d=r(o(s),2),k=o(d,!0);t(d);var p=r(d,2),E=o(p);{let C=F(()=>`/r/${n(i).codigo}`);ge(E,{get path(){return n(C)},size:220,alt:"QR de tu red"})}t(p);var b=r(p,4),R=o(b);t(b);var g=r(b,2);ie(2),t(s),I(()=>{h(k,n(i).nombreCompleto),ce(b,"href",`/r/${n(i).codigo??""}`),h(R,`/r/${n(i).codigo??""}`)}),be("click",g,G),_(l,s)},X=l=>{var s=we(),d=o(s),k=r(o(d),2);m(k),t(d);var p=r(d,2),E=r(o(p),2);m(E),t(p);var b=r(p,2),R=r(o(b),2);m(R),t(b);var g=r(b,2),C=r(o(g),2);m(C),t(g);var M=r(g,2),S=r(o(M),2),A=o(S);ue(A,20,()=>["01","02","03","04","05","06","07","08","09","10","11","12"],me,(a,c)=>{var u=he(),ae=o(u,!0);t(u);var U={};I(re=>{h(ae,re),U!==(U=c)&&(u.value=(u.__value=c)??"")},[()=>["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][parseInt(c)-1]]),_(a,u)}),t(A);var $=r(A,2);m($);var Q=r($,2);m(Q),t(S),t(M);var O=r(M,2),j=r(o(O),2);m(j),t(O);var P=r(O,2),Y=o(P);fe(Y,{get lat(){return e.lat},set lat(a){e.lat=a},get lng(){return e.lng},set lng(a){e.lng=a}}),t(P);var q=r(P,2);{var Z=a=>{var c=ye(),u=o(c,!0);t(c),I(()=>h(u,n(x))),_(a,c)};J(q,a=>{n(x)&&a(Z)})}var D=r(q,2),ee=o(D,!0);t(D),t(s),I(()=>{D.disabled=n(w),h(ee,n(w)?"Creandoâ€¦":"CREAR USUARIO")}),pe("submit",s,a=>{a.preventDefault(),W()}),v(k,()=>e.nombre,a=>e.nombre=a),v(E,()=>e.apellidoPaterno,a=>e.apellidoPaterno=a),v(R,()=>e.apellidoMaterno,a=>e.apellidoMaterno=a),v(C,()=>e.telefono,a=>e.telefono=a),xe(A,()=>e.mes,a=>e.mes=a),v($,()=>e.dia,a=>e.dia=a),v(Q,()=>e.anio,a=>e.anio=a),v(j,()=>e.direccion,a=>e.direccion=a),_(l,s)};J(K,l=>{n(i)?l(V):l(X,!1)})}t(T),t(N),_(z,N),le()}de(["click"]);export{Oe as component};
